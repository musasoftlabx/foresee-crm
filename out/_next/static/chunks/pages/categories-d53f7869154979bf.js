(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{829:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/categories",function(){return n(9862)}])},9862:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(9815),s=n(5893),i=n(7294),o=n(196),u=n(1503),c=n(8228),a=n(3789),d=n(9305),l=n(754),x=n(4373),b=n(1020),f=n(562),g=n(5214),h=n(1284),j=n(1702),Z=n(9594),p=n(1812),y=n(918),m=n(9144),_=n(930),v=n(2389),w=n(9630),C=n(9352),S=n(5434),D=n(1649);function k(){var e=(0,i.useState)(""),t=e[0],n=e[1],k=(0,i.useState)([]),P=k[0],A=k[1];(0,u.a)(["Categories"],function(e){var t=e.queryKey;return o.ZP.get(t[0])},{select:function(e){return e.data},onSuccess:function(e){return A(e.rows)}});var E=(0,c.D)(function(e){return o.ZP.post("Categories",e)}).mutate,N=(0,c.D)(function(e){return o.ZP.post("Categories/Subcategory",e)},{onSuccess:function(e){return A(function(t){return(0,r.Z)(t.map(function(t){return t._id===e.data._id&&(t.subcategories=e.data.subcategories,t.subcategory=""),t}))})}}).mutate,O=(0,c.D)(function(e){return o.ZP.delete("Categories/".concat(e))}).mutate,W=(0,c.D)(function(e){return o.ZP.delete("Categories/".concat(e._id,"/").concat(e.subcategory))}).mutate;return(0,s.jsxs)(d.Z,{maxWidth:"xs",children:[(0,s.jsx)("form",{onSubmit:function(e){e.preventDefault(),E(JSON.stringify({category:t}),{onSuccess:function(e){A(function(t){return[e.data].concat((0,r.Z)(t))}),n("")}})},children:(0,s.jsxs)(b.Z,{container:!0,children:[(0,s.jsx)(b.Z,{display:"flex",justifyContent:"center",xs:12,children:(0,s.jsx)(_.Z,{label:"Add a new category",variant:"outlined",fullWidth:!0,onChange:function(e){return n(e.target.value)},value:t,sx:{borderRadius:10,mb:3,textAlign:"center"}})}),(0,s.jsx)(b.Z,{display:"flex",justifyContent:"center",xs:12,children:(0,s.jsx)(p.Z,{type:"submit",disabled:!t,loadingIndicator:(0,s.jsxs)(m.Z,{spacing:1,direction:"row",children:[(0,s.jsx)(w.Z,{variant:"subtitle2",children:"ADDING"}),(0,s.jsx)(l.Z,{size:20})]}),variant:"outlined",sx:{borderRadius:4,borderStyle:"double",borderWidth:4,"&:hover":{borderStyle:"double",borderWidth:4,boxShadow:"rgba(52, 117, 210, 0.5) 0px 30px 90px"}},children:"ADD CATEGORY"})})]})}),(0,s.jsx)(g.Z,{component:y.Z,sx:{width:"100%",maxWidth:360,mt:5,bgcolor:"background.paper",borderRadius:3},children:P&&P.map(function(e,t){return(0,s.jsxs)(s.Fragment,{children:[t>0&&(0,s.jsx)(x.Z,{sx:{mb:1}}),(0,s.jsxs)(h.ZP,{secondaryAction:(0,s.jsx)(v.Z,{title:"Delete category",children:(0,s.jsx)(Z.Z,{children:(0,s.jsx)(f.Z,{onClick:function(){return O(e._id,{onSuccess:function(){A(function(t){return(0,r.Z)(t.filter(function(t){return t._id!==e._id}))})},onError:function(e){showAlert({status:e.response.data.status,subject:e.response.data.subject,body:e.response.data.body})}})},color:"error",sx:{ml:3,"&:hover":{background:"#fbdbdb"}},children:(0,s.jsx)(C.YUq,{})})})}),children:[(0,s.jsx)(Z.Z,{children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(S.dwX,{size:28})})}),(0,s.jsx)(j.Z,{primary:e.category})]},t),(0,s.jsxs)(g.Z,{dense:!0,sx:{pb:3},children:[(0,s.jsx)(a.Z,{sx:{px:5},children:(0,s.jsx)(_.Z,{label:"Add a sub category",variant:"standard",fullWidth:!0,size:"small",onChange:function(t){return A(function(n){return(0,r.Z)(n.map(function(n){return n._id===e._id&&(n.subcategory=t.target.value),n}))})},onKeyPress:function(t){return"Enter"===t.key&&N(JSON.stringify({_id:e._id,subcategory:e.subcategory}))},value:e.subcategory,sx:{mb:3}})}),e.subcategories&&e.subcategories.map(function(t,n){return(0,s.jsxs)(h.ZP,{sx:{pl:4},children:[(0,s.jsx)(f.Z,{sx:{mt:-.5,mr:1},children:(0,s.jsx)(D.osu,{size:16})}),(0,s.jsx)(j.Z,{primary:t}),(0,s.jsx)(Z.Z,{children:(0,s.jsx)(v.Z,{title:"Delete sub category",placement:"left-start",children:(0,s.jsx)(f.Z,{onClick:function(){return W({_id:e._id,subcategory:t},{onSuccess:function(){A(function(n){return(0,r.Z)(n.map(function(n){return n._id===e._id&&n.subcategories.splice(n.subcategories.indexOf(t),1),n}))})},onError:function(e){showAlert({status:e.response.data.status,subject:e.response.data.subject,body:e.response.data.body})}})},color:"error",sx:{mt:-.5,"&:hover":{background:"#fbdbdb"}},children:(0,s.jsx)(C.qy0,{size:20})})})})]},n)})]})]})})})]})}}},function(e){e.O(0,[937,228,866,930,14,198,6,402,829,774,888,179],function(){return e(e.s=829)}),_N_E=e.O()}]);