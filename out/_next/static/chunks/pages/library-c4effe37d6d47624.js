(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[175],{2957:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/library",function(){return t(4590)}])},4590:function(e,r,t){"use strict";t.r(r);var i=t(7568),o=t(6042),a=t(9396),l=t(414),n=t(5893),s=t(7294),d=t(930),u=t(3789),c=t(562),f=t(9041),x=t(1812),h=t(9072),k=t(9630),m=t(1719),w=t(2175),p=t(9352),D=t(3860),b=t.n(D),Z=t(6829),j=t(2359),g=t(1358),v=t(4231),y=(0,m.ZP)(function(e){return(0,n.jsx)(d.Z,(0,o.Z)({InputProps:{disableUnderline:!0}},e))})(function(e){var r=e.theme;return{"& .MuiFilledInput-root":{border:"1px solid #e2e2e1",overflow:"hidden",borderRadius:6,backgroundColor:"light"===r.palette.mode?"#fcfcfb":"#2b2b2b",transition:r.transitions.create(["border-color","background-color","box-shadow",]),":before":{borderBottom:0},"&:hover":{backgroundColor:"transparent"},"&.Mui-focused":{backgroundColor:"transparent",borderBottom:"1px solid ".concat(r.palette.primary.main)},"&.Mui-error":{backgroundColor:"#fff8f8",borderBottom:"1px solid ".concat(r.palette.error.main)}},".MuiFormHelperText-root":{textAlign:"right",fontWeight:500,lineHeight:.5,marginRight:5,marginTop:7,opacity:.7},".MuiInputBase-adornedStart":{":before":{content:"unset"},":after":{content:"unset"}}}}),_=function(e){return(0,n.jsx)(h.ZP,{xs:12,sm:6,md:4,lg:3,sx:{px:1,mt:1},children:e.children})},q=function(){var e,r=(0,s.useState)(b()()),t=r[0],d=r[1];return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(w.J9,{initialValues:{offerDate:t,offerNo:"",notes:"",issue:"",solution:"",warranty:"",timeframe:"",workDetails:[{work:"",brand:"",quantity:1,price:0},]},validationSchema:v.Ry({offerNo:v.Z_().max(10,"Max of 10 chars").required("Required"),issue:v.Z_().max(50,"Max of 50 chars").required("Required"),solution:v.Z_().max(50,"Max of 50 chars"),warranty:v.Z_().max(10,"Max of 10 chars"),timeframe:v.Z_().max(10,"Max of 10 chars"),workDetails:v.IX().of(v.Ry().shape({work:v.Z_().required("Required."),brand:v.Z_().required("Required."),quantity:v.Z_().required("Required."),price:v.Z_().required("Required.")}))}),onSubmit:(e=(0,i.Z)(function(e,r){var t;return(0,l.__generator)(this,function(t){switch(t.label){case 0:return[4,fetch("/api/quotation/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return t.sent().json(),r.setSubmitting(!1),r.resetForm({values:{offerDate:null,offerNo:"",notes:"",issue:"",solution:"",warranty:"",timeframe:"",workDetails:[{work:"",brand:"",quantity:1,price:0}]}}),[2]}})}),function(r,t){return e.apply(this,arguments)}),children:function(e){var r=e.values,i=e.errors,l=e.touched,s=e.getFieldProps,m=e.isSubmitting;return(0,n.jsx)(w.l0,{children:(0,n.jsx)(h.ZP,{container:!0,children:(0,n.jsxs)(h.ZP,{xs:!0,children:[(0,n.jsx)(k.Z,{variant:"h6",sx:{mb:-.5},children:"Quotation details"}),(0,n.jsx)(k.Z,{variant:"caption",sx:{color:"#808080",ml:.3},children:"Click to add or remove work entities"}),(0,n.jsxs)(h.ZP,{container:!0,children:[(0,n.jsx)(_,{children:(0,n.jsx)(j._,{dateAdapter:Z.y,children:(0,n.jsx)(g.O,{value:t,closeOnSelect:!0,disablePast:!0,inputFormat:"DD.MM.YYYY",onChange:function(e){return d(e)},renderInput:function(e){var r=e.inputRef,t=e.inputProps;return(0,n.jsx)(y,(0,a.Z)((0,o.Z)({ref:r},t),{label:"Offer Date",variant:"filled",fullWidth:!0,size:"small",error:l.offerDate&&Boolean(i.offerDate),helperText:l.offerDate&&i.offerDate}))}})})}),(0,n.jsx)(_,{children:(0,n.jsx)(y,(0,a.Z)((0,o.Z)({label:"Offer #",variant:"filled",fullWidth:!0,size:"small"},s("offerNo")),{error:l.offerNo&&Boolean(i.offerNo),helperText:l.offerNo&&i.offerNo}))}),(0,n.jsx)(_,{children:(0,n.jsx)(y,(0,a.Z)((0,o.Z)({label:"Issue *",variant:"filled",fullWidth:!0,size:"small"},s("issue")),{error:l.issue&&Boolean(i.issue),helperText:l.issue&&i.issue}))}),(0,n.jsx)(_,{children:(0,n.jsx)(y,(0,a.Z)((0,o.Z)({label:"Solution",variant:"filled",fullWidth:!0,size:"small"},s("solution")),{error:l.solution&&Boolean(i.solution),helperText:l.solution&&i.solution}))}),(0,n.jsx)(_,{children:(0,n.jsx)(y,(0,a.Z)((0,o.Z)({label:"Warranty",variant:"filled",fullWidth:!0,size:"small"},s("warranty")),{error:l.warranty&&Boolean(i.warranty),helperText:l.warranty&&i.warranty}))}),(0,n.jsx)(_,{children:(0,n.jsx)(y,(0,a.Z)((0,o.Z)({label:"Timeframe",variant:"filled",fullWidth:!0,size:"small"},s("timeframe")),{error:l.timeframe&&Boolean(i.timeframe),helperText:l.timeframe&&i.timeframe}))})]}),(0,n.jsx)(_,{children:(0,n.jsx)(y,(0,a.Z)((0,o.Z)({label:"Notes (Optional)",variant:"filled",size:"small",fullWidth:!0,multiline:!0,rows:3},s("notes")),{error:l.notes&&Boolean(i.notes),helperText:l.notes&&i.notes}))}),(0,n.jsx)(w.F2,{name:"workDetails",children:function(e){e.insert;var t=e.remove,d=e.push;return(0,n.jsxs)(u.Z,{sx:{mt:5},children:[(0,n.jsx)(k.Z,{variant:"h6",sx:{mb:-.5},children:"Work details"}),(0,n.jsx)(k.Z,{variant:"caption",sx:{color:"#808080",ml:.3},children:"Click + to add or remove work entities"}),r.workDetails.length>0&&r.workDetails.map(function(e,u){return(0,n.jsxs)(h.ZP,{container:!0,alignItems:"center",children:[(0,n.jsx)(h.ZP,{xs:12,md:3,lg:5,sx:{px:1,mt:1},children:(0,n.jsx)(y,(0,a.Z)((0,o.Z)({label:"Work Scope *",variant:"filled",size:"small",fullWidth:!0,placeholder:"Scope of work done"},s("workDetails.".concat(u,".work"))),{error:i&&i.workDetails&&i.workDetails[u]&&i.workDetails[u].work&&l&&l.workDetails&&l.workDetails[u]&&l.workDetails[u].work}))}),(0,n.jsx)(h.ZP,{xs:12,md:3,lg:3,sx:{px:1,mt:1},children:(0,n.jsx)(y,(0,a.Z)((0,o.Z)({label:"Brand *",variant:"filled",size:"small",fullWidth:!0,placeholder:"Brand that worked on"},s("workDetails.".concat(u,".brand"))),{error:i&&i.workDetails&&i.workDetails[u]&&i.workDetails[u].brand&&l&&l.workDetails&&l.workDetails[u]&&l.workDetails[u].brand,helperText:i&&i.workDetails&&i.workDetails[u]&&i.workDetails[u].brand&&l&&l.workDetails&&l.workDetails[u]&&l.workDetails[u].brand}))}),(0,n.jsx)(h.ZP,{xs:12,md:2,lg:1,sx:{px:1,mt:1},children:(0,n.jsx)(y,(0,a.Z)((0,o.Z)({label:"Quantity *",variant:"filled",size:"small",fullWidth:!0},s("workDetails.".concat(u,".quantity"))),{error:i&&i.workDetails&&i.workDetails[u]&&i.workDetails[u].quantity&&l&&l.workDetails&&l.workDetails[u]&&l.workDetails[u].quantity,helperText:i&&i.workDetails&&i.workDetails[u]&&i.workDetails[u].quantity&&l&&l.workDetails&&l.workDetails[u]&&l.workDetails[u].quantity}))}),(0,n.jsx)(h.ZP,{xs:12,md:2,lg:2,sx:{px:1,mt:1},children:(0,n.jsx)(y,(0,a.Z)((0,o.Z)({label:"Price *",variant:"filled",size:"small",fullWidth:!0},s("workDetails.".concat(u,".price"))),{InputProps:{startAdornment:(0,n.jsx)(f.Z,{position:"start",sx:{pt:.2,borderBottom:0},children:"KES"})},error:i&&i.workDetails&&i.workDetails[u]&&i.workDetails[u].price&&l&&l.workDetails&&l.workDetails[u]&&l.workDetails[u].price,helperText:i&&i.workDetails&&i.workDetails[u]&&i.workDetails[u].price&&l&&l.workDetails&&l.workDetails[u]&&l.workDetails[u].price}))}),(0,n.jsxs)(h.ZP,{xs:12,md:1,children:[r.workDetails.length>1&&(0,n.jsx)(c.Z,{color:"error",sx:{background:"#ffeeee","&:hover":{background:"#fbdbdb"},mt:1,mr:1},children:(0,n.jsx)(p.w6k,{onClick:function(){return t(u)}})}),u===r.workDetails.length-1&&(0,n.jsx)(c.Z,{sx:{background:"#f2eff9","&:hover":{background:"#d1d9fc"},mt:1},children:(0,n.jsx)(p.uGf,{onClick:function(){return d({work:"",brand:"",quantity:1,price:0})}})})]})]},u)})]})}}),(0,n.jsx)(h.ZP,{sx:{px:1,mt:5},children:(0,n.jsx)(x.Z,{type:"submit",size:"large",disabled:i||m,loading:m,loadingIndicator:"SUBMITTING.....",variant:"outlined",children:"CREATE QUOTATION"})})]})})})}})})};r.default=q}},function(e){e.O(0,[937,930,14,72,264,50,774,888,179],function(){return e(e.s=2957)}),_N_E=e.O()}]);